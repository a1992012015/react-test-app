(this["webpackJsonpreact-test-app"]=this["webpackJsonpreact-test-app"]||[]).push([[3],{230:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){document.title=e}},231:function(e,t,a){"use strict";t.a=a.p+"static/media/logo.6ce24c58.svg"},235:function(e,t,a){e.exports={container:"_1wWQJYonfOe22PduF8hs1G"}},238:function(e,t,a){e.exports={container:"_22Gc0BaYoEe9USTQ4xGbmd",tips:"wxDQnLtsRddMduAGp_paC",chess:"_28ncn5_jlxnM4CbyYkl_7S",black:"rrrjRWWWpRGFIE-Ym8ZGU",white:"_3GN70zyXD7BCYF-1IN0qMO",actions:"_2VgDucT53FGHFYjbbWgbCR"}},239:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return m}));var n=a(40),s=a(50),c=a(52),r=a(51),o=a(30),i=a(57),p=a(59),l=a(35),h=a(82),u=a(27),d=function(t){Object(c.a)(o,t);var a=Object(r.a)(o);function o(){var e;Object(n.a)(this,o);for(var t=arguments.length,s=new Array(t),c=0;c<t;c++)s[c]=arguments[c];return(e=a.call.apply(a,[this].concat(s))).gameWorker=void 0,e}return Object(s.a)(o,[{key:"componentDidMount",value:function(){var t=this;this.gameWorker=new Worker(e,void 0),this.gameWorker.onmessage=function(e){var a=e.data;if(console.log("%c=============== ".concat(h.a[a.type]," ==============="),"color: aqua;"),console.log("get onmessage:",a),a.type===h.a.PUT){var n=a.payload,s={gameType:n.piece.role===u.a.white?p.a.DUEL_HUM:p.a.DUEL_COM,piece:n.piece};t.props.dispatch(Object(l.i)(s))}else if(a.type===h.a.BOARD){var c=a.payload,r={gameType:c.first?p.a.DUEL_HUM:p.a.DUEL_COM,first:c.first?u.a.block:u.a.white,board:c.pieces};t.props.dispatch(Object(l.b)(r))}else a.type===h.a.BACKWARD?(console.log("\u6094\u68cb\u6210\u529f\u3002\u3002\u3002"),t.props.dispatch(Object(l.g)())):a.type===h.a.FORWARD?(console.log("\u524d\u8fdb\u6210\u529f\u3002\u3002\u3002"),t.props.dispatch(Object(l.g)())):a.type===h.a.CONFIG?(console.log("\u8bbe\u7f6econfig\u6210\u529f\u3002\u3002\u3002"),t.props.dispatch(Object(l.g)())):(console.log("worker => ".concat(h.a[a.type])),console.log("\u9519\u8bef\u7684Type\u3002\u3002\u3002"))},this.gameWorker.onerror=function(e){console.warn(e)}}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.workerPost;a&&this.gameWorker&&this.gameWorker.postMessage(a)}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.gameWorker)||void 0===e||e.terminate()}},{key:"render",value:function(){return null}}]),o}(i.a),m=Object(o.c)((function(e){return{workerPost:e.worker}}),(function(e){return{dispatch:e}}))(d)}).call(this,a(240))},240:function(e,t,a){e.exports=a.p+"static/js/1.61b8f343.chunk.worker.js"},241:function(e,t,a){e.exports={container:"_3Blj5zIaveqJXxMOwVEUUY",canvas:"_2PORtCNMuvjLNxW1oNNXng",pieces:"_3M_gUVHRELoDwvve86Rk3I",piecesAnimation:"_1Y44oO1YsaCPR_-ORPuW6N",piecesLogo:"_2R8_SrxkonKK8LRmnJ3lb2","game-logo-spin":"_2HhNKLeoCM9QqlFvPu3AAS",piecesBox:"_3uTPOYuB1gCm_dsHiFDNFS",piecesRow:"_1V-N_O2ClDkQ0wxXMtyZRs",chessman:"_1Bdc0IK_A1fxUoVSsIUpdQ",chessmanWhite:"_1ZRW8YeBKlPSn5Uf--f_Hd",chessmanBlack:"_3dt9q6TJaJARnCYC2JTRgj",chessmanDisappear:"_2jAt-PHVv5kzHznAgO1BuA",chessmanAnim:"Ap7y_IFdFs2x_Kpr8l0uL",pulse:"_1Gu5qZXG0Dz0WoXkGq4yVs",chessmanMain:"_2fPto_z3iHvmmSAQ9yVpHF"}},256:function(e,t,a){"use strict";a.r(t);var n=a(67),s=a(40),c=a(50),r=a(52),o=a(51),i=a(0),p=a.n(i),l=a(30),h=a(232),u=a(235),d=a.n(u),m=(a(236),a(250)),g=a(238),f=a.n(g),j=a(59),b=a(57),v=a(27),O=a(13),y=a(9),w=function(e){Object(r.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).gameStartWay=function(t){return function(a){console.log(a),1===t?e.props.gameStart(!1,!1):2===t?e.props.gameStart(!0,!0):e.props.gameStart(!0,!1)}},e.getChessColor=function(){var t=e.props,a=t.piece,n=t.first,s=a.role||O.a.reverseRole(n);return s===v.a.white?f.a.black:s===v.a.block?f.a.white:""},e.renderMessage=function(){var t=e.props,a=t.gameStatus,n=t.winning,s=t.steps,c=t.piece,r=t.time;return a===j.a.DUEL_FINISH?"".concat(n===v.a.white?"\u5706\u73af\u4e4b\u7406":"\u60a8\u5c45\u7136","\u8d62\u5f97\u4e86\u80dc\u5229\uff01\uff01\uff01"):a===j.a.DUEL_READY?"\u70b9\u51fb\u5f00\u59cb\u6309\u94ae\u5f00\u59cb\u6e38\u620f":a===j.a.DUEL_HUM&&0===s?"\u60a8\u7684\u5148\u624b\uff0c\u8bf7\u843d\u5b50":a===j.a.DUEL_HUM?"Score: ".concat(c.score," Step: ").concat(s," Time: ").concat(r,"s"):"\u7535\u8111\u6b63\u5728\u601d\u8003\u4e2d\u3002\u3002\u3002"},e.renderActions=function(){if(e.props.gameStatus===j.a.DUEL_READY)return Object(y.jsxs)(p.a.Fragment,{children:[Object(y.jsx)(m.a,{type:"primary",size:"large",onClick:e.gameStartWay(1),children:"\u5148\u624b\u5f00\u59cb"}),Object(y.jsx)(m.a,{type:"primary",size:"large",onClick:e.gameStartWay(2),children:"\u968f\u673a\u5f00\u59cb"}),Object(y.jsx)(m.a,{type:"primary",size:"large",onClick:e.gameStartWay(3),children:"\u540e\u624b\u5f00\u59cb"})]});var t=e.props,a=t.gameReset,n=t.gameForward,s=t.gameBackward;return Object(y.jsxs)(p.a.Fragment,{children:[Object(y.jsx)(m.a,{type:"primary",size:"large",onClick:n,children:"\u524d\u4e00\u6b65"}),Object(y.jsx)(m.a,{type:"primary",size:"large",onClick:a,children:"\u91cd\u7f6e\u6e38\u620f"}),Object(y.jsx)(m.a,{type:"primary",size:"large",onClick:s,children:"\u540e\u4e00\u6b65"})]})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.width;return Object(y.jsxs)("div",{className:f.a.container,style:{width:16*e+40},children:[Object(y.jsxs)("div",{className:f.a.tips,children:[Object(y.jsx)("span",{className:"".concat(f.a.chess," ").concat(this.getChessColor())}),this.renderMessage()]}),Object(y.jsx)("div",{className:f.a.actions,children:this.renderActions()})]})}}]),a}(b.a),k=a(239),x=a(242),R=a(241),_=a.n(R),C=a(231),D=a(81),A=function(e){Object(r.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).canvasRef=p.a.createRef(),e.gameGo=function(t,a){console.log("[x: ".concat(t,", y: ").concat(a,"]")),e.props.gameStatus===j.a.DUEL_HUM?e.props.gameGo(Object(D.a)({x:t,y:a,role:v.a.block})):console.log("\u8fd8\u4e0d\u80fd\u843d\u5b50\uff01\uff01")},e.draftsman=function(){var t,a,n=e.props.width,s=Object(x.a)(n,14),c=Object(x.a)(n,14),r=null===(t=e.canvasRef)||void 0===t||null===(a=t.current)||void 0===a?void 0:a.getContext("2d");if(r){r.moveTo(0,0),r.lineTo(s,0),r.lineTo(s,c),r.lineTo(0,c),r.lineTo(0,0),r.stroke();for(var o=1;o<=13;o++){var i=o*n;r.moveTo(i,0),r.lineTo(i,c),r.stroke(),r.moveTo(0,i),r.lineTo(s,i),r.stroke()}}},e.renderRowDiv=function(){return e.props.board.map((function(t,a){return Object(y.jsx)("li",{className:_.a.piecesRow,children:e.row(a,t)},a)}))},e.row=function(t,a){var n=e.props.width;return a.map((function(a,s){var c={width:"".concat(n,"px"),height:"".concat(n,"px")};return Object(y.jsx)("div",{tabIndex:0,role:"button",style:c,className:_.a.chessman,onKeyDown:function(){return null},onClick:function(){return e.gameGo(s,t)},children:Object(y.jsx)("button",{type:"button","aria-label":"piece",className:e.getPieceClassName(a,t,s),children:a.step})},s)}))},e}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.width!==e.width&&this.draftsman()}},{key:"getPieceClassName",value:function(e,t,a){var n=this.props,s=n.steps,c=n.gameStatus,r=n.winMap,o=n.first,i="";return i=null!==e.step&&e.role!==v.a.empty?e.role!==o?"".concat(_.a.chessmanMain," ").concat(_.a.chessmanWhite):"".concat(_.a.chessmanMain," ").concat(_.a.chessmanBlack):_.a.chessmanDisappear,s===e.step&&(i="".concat(i," ").concat(_.a.chessmanAnim)),c===j.a.DUEL_FINISH&&r.forEach((function(e){e.x===a&&e.y===t&&(i="".concat(i," ").concat(_.a.chessmanAnim))})),i}},{key:"render",value:function(){var e=this.props.width,t=14*e,a=Object(h.a)(e,2);return e?Object(y.jsxs)("div",{className:_.a.container,children:[Object(y.jsx)("canvas",{className:_.a.canvas,ref:this.canvasRef,width:t,height:t,children:"\u4f60\u7684\u7535\u8111\u6d4f\u89c8\u5668\u4e0d\u652f\u6301canvas\uff0c\u6362\u7535\u8111\u5427~"}),Object(y.jsxs)("div",{className:_.a.pieces,children:[Object(y.jsx)("div",{className:_.a.piecesAnimation,children:Object(y.jsx)("img",{src:C.a,className:_.a.piecesLogo,alt:"logo"})}),Object(y.jsx)("ul",{className:_.a.piecesBox,style:{padding:"".concat(a,"px")},children:this.renderRowDiv()})]})]}):null}}]),a}(b.a),N=a(69),S=a(82),U=a(35),W=a(230),M=function(e){Object(r.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).containerRef=p.a.createRef(),n.gameStart=function(e,t){var a={type:S.a.START,payload:{first:e,randomOpening:t}};n.props.dispatch(Object(N.a)(a))},n.gameConfig=function(e){console.log("gameConfig");var t={type:S.a.CONFIG,payload:{config:e}};n.props.dispatch(Object(U.f)(t))},n.gameGo=function(e){console.log("gameGo piece:",e);var t={gameType:j.a.DUEL_COM,piece:Object(D.a)(e)};n.props.dispatch(Object(U.i)(t))},n.gameForward=function(){console.log("gameForward");var e={type:S.a.FORWARD};n.props.dispatch(Object(U.f)(e))},n.gameBackward=function(){console.log("gameBackward");var e={type:S.a.BACKWARD};n.props.dispatch(Object(U.f)(e))},n.gameReset=function(){console.log("gameReset"),n.props.dispatch(Object(U.h)())},n.resizeCheckerboard=function(){var e;if(null===(e=n.containerRef)||void 0===e?void 0:e.current){var t=n.containerRef.current.getBoundingClientRect(),a=t.width-40,s=t.height-40,c=a>s?s:a,r=c>720?720:c,o=Math.floor(Object(h.a)(r,16));n.setState({width:o})}},n.state={width:0},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){Object(W.a)("\u4e94\u5b50\u68cb"),this.resizeCheckerboard(),window.addEventListener("resize",this.resizeCheckerboard)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeCheckerboard)}},{key:"render",value:function(){var e={width:this.state.width,first:this.props.first,steps:this.props.steps,board:this.props.board,winMap:this.props.winMap,winning:this.props.winning,gameStatus:this.props.gameType,gameGo:this.gameGo},t={time:this.props.spendTime,width:this.state.width,steps:this.props.steps,first:this.props.first,piece:this.props.piece,winning:this.props.winning,gameStatus:this.props.gameType,gameReset:this.gameReset,gameStart:this.gameStart,gameForward:this.gameForward,gameBackward:this.gameBackward};return Object(y.jsxs)("div",{ref:this.containerRef,className:d.a.container,children:[Object(y.jsx)(k.a,{}),Object(y.jsx)(A,Object(n.a)({},e)),Object(y.jsx)(w,Object(n.a)({},t))]})}}]),a}(b.a);t.default=Object(l.c)((function(e){return Object(n.a)({},e.gobang)}),(function(e){return{dispatch:e}}))(M)}}]);
//# sourceMappingURL=3.d22b2f9e.chunk.js.map